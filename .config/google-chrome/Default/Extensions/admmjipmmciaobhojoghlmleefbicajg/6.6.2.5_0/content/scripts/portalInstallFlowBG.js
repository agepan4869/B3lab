(function(d){(d.IDSafe=d.IDSafe||{}).portalInstallFlowBG=function(a,d){var g=a.utils.isNil,h=a.utils.isntNil,f=a.extensionAdapter,c={constants:{updateStoreURL:"e0681b81-a1c6-457f-9c1a-bfab5b301924",closeStoreURL:"51b7334f-2168-4ba9-a60a-104af553b98e",removeEnableAllListener:"8ea7c841-04db-46b6-8b23-24c3692a44ae"},_isCurrentExtensionsStoreURL:function(b){return a.utils.isStorePageURL(b)&&d.IDSPortalUtils.isCurrentExtensionURL(b)},_updateTabUrlFlow:function(b,c){if(!g(b)&&!g(c)){var e=f.getWindowIDForTab(b);
h(e)&&f.focusWindow(e,function(){var e=a.extensionAdapter.getTabID(b);h(e)&&f.updateTabUrl(e,c,function(b){f.activateTab(e)})})}},_closeTabUrlFlow:function(b){g(b)||(b=a.extensionAdapter.getTabID(b),h(b)&&f.closeTab(b))},_updateOrCloseExtensionStoreURL:function(b,e){var d=c.constants;b!==d.updateStoreURL&&b!==d.closeStoreURL||f.getActiveTab(function(a){c._isCurrentExtensionsStoreURL(a.url)?b===d.updateStoreURL?c._updateTabUrlFlow(a,e):c._closeTabUrlFlow(a):f.getAllTabs(function(a){a.forEach(function(a){c._isCurrentExtensionsStoreURL(a.url)&&
(b===d.updateStoreURL?c._updateTabUrlFlow(a,e):c._closeTabUrlFlow(a))})})})},handleMessage:function(b,a,d){a=c.constants;switch(b.name){case a.updateStoreURL:c._updateOrCloseExtensionStoreURL(a.updateStoreURL,b.message);break;case a.closeStoreURL:c._updateOrCloseExtensionStoreURL(a.closeStoreURL)}}};f.addMessageListener(c.handleMessage);return c}(d.SymBfw,d.IDSafe)})(executionContext);
