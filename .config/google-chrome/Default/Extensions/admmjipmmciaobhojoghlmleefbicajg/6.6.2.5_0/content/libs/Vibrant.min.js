(function e$$0(r,w,x){function f(p,a){if(!w[p]){if(!r[p]){var b="function"==typeof require&&require;if(!a&&b)return b(p,!0);if(g)return g(p,!0);b=Error("Cannot find module '"+p+"'");throw b.code="MODULE_NOT_FOUND",b;}b=w[p]={exports:{}};r[p][0].call(b.exports,function(b){var a=r[p][1][b];return f(a?a:b)},b,b.exports,e$$0,r,w,x)}return w[p].exports}for(var g="function"==typeof require&&require,m=0;m<x.length;m++)f(x[m]);return f})({1:[function(r,w,x){if(!t)var t={map:function(f,g){var m={};return g?
f.map(function(f,a){m.index=a;return g.call(m,f)}):f.slice()},naturalOrder:function(f,g){return f<g?-1:f>g?1:0},sum:function(f,g){var m={};return f.reduce(g?function(f,a,b){m.index=b;return f+g.call(m,a)}:function(f,a){return f+a},0)},max:function(f,g){return Math.max.apply(null,g?t.map(f,g):f)}};r=function(){function f(d,c,b){return(d<<2*e)+(c<<e)+b}function g(d){function c(){b.sort(d);a=!0}var b=[],a=!1;return{push:function(c){b.push(c);a=!1},peek:function(d){a||c();void 0===d&&(d=b.length-1);return b[d]},
pop:function(){a||c();return b.pop()},size:function(){return b.length},map:function(c){return b.map(c)},debug:function(){a||c();return b}}}function m(d,c,b,a,k,v,z){this.r1=d;this.r2=c;this.g1=b;this.g2=a;this.b1=k;this.b2=v;this.histo=z}function p(){this.vboxes=new g(function(d,c){return t.naturalOrder(d.vbox.count()*d.vbox.volume(),c.vbox.count()*c.vbox.volume())})}function a(d){var c=Array(1<<3*e),b,a,k,v;d.forEach(function(d){a=d[0]>>h;k=d[1]>>h;v=d[2]>>h;b=f(a,k,v);c[b]=(c[b]||0)+1});return c}
function b(d,c){var b=1E6,a=0,k=1E6,v=0,n=1E6,e=0,f,l,q;d.forEach(function(c){f=c[0]>>h;l=c[1]>>h;q=c[2]>>h;f<b?b=f:f>a&&(a=f);l<k?k=l:l>v&&(v=l);q<n?n=q:q>e&&(e=q)});return new m(b,a,k,v,n,e,c)}function n(d,c){function b(b){var d=b+"1";b+="2";for(l=c[d];l<=c[b];l++)if(h[l]>e/2){var a=c.copy();var n=c.copy();var k=l-c[d];var y=c[b]-l;for(k=k<=y?Math.min(c[b]-1,~~(l+y/2)):Math.max(c[d],~~(l-1-k/2));!h[k];)k++;for(y=g[k];!y&&h[k-1];)y=g[--k];a[b]=k;n[d]=a[b]+1;return[a,n]}}if(c.count()){var a=c.r2-
c.r1+1,k=c.g2-c.g1+1,n=t.max([a,k,c.b2-c.b1+1]);if(1==c.count())return[c.copy()];var e=0,h=[],g=[],l,q,u;if(n==a)for(l=c.r1;l<=c.r2;l++){var m=0;for(q=c.g1;q<=c.g2;q++)for(u=c.b1;u<=c.b2;u++){var p=f(l,q,u);m+=d[p]||0}e+=m;h[l]=e}else if(n==k)for(l=c.g1;l<=c.g2;l++){m=0;for(q=c.r1;q<=c.r2;q++)for(u=c.b1;u<=c.b2;u++)p=f(q,l,u),m+=d[p]||0;e+=m;h[l]=e}else for(l=c.b1;l<=c.b2;l++){m=0;for(q=c.r1;q<=c.r2;q++)for(u=c.g1;u<=c.g2;u++)p=f(q,u,l),m+=d[p]||0;e+=m;h[l]=e}h.forEach(function(c,b){g[b]=e-c});return n==
a?b("r"):n==k?b("g"):b("b")}}var e=5,h=8-e;m.prototype={volume:function(b){if(!this._volume||b)this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1);return this._volume},count:function(b){var c=this.histo;if(!this._count_set||b){b=0;var d,a,k;for(d=this.r1;d<=this.r2;d++)for(a=this.g1;a<=this.g2;a++)for(k=this.b1;k<=this.b2;k++)index=f(d,a,k),b+=c[index]||0;this._count=b;this._count_set=!0}return this._count},copy:function(){return new m(this.r1,this.r2,this.g1,this.g2,this.b1,
this.b2,this.histo)},avg:function(b){var c=this.histo;if(!this._avg||b){b=0;var a=1<<8-e,d=0,k=0,n=0,h,g,m;for(h=this.r1;h<=this.r2;h++)for(g=this.g1;g<=this.g2;g++)for(m=this.b1;m<=this.b2;m++){var l=f(h,g,m);l=c[l]||0;b+=l;d+=l*(h+.5)*a;k+=l*(g+.5)*a;n+=l*(m+.5)*a}this._avg=b?[~~(d/b),~~(k/b),~~(n/b)]:[~~(a*(this.r1+this.r2+1)/2),~~(a*(this.g1+this.g2+1)/2),~~(a*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(b){var c=b[0]>>h;gval=b[1]>>h;bval=b[2]>>h;return c>=this.r1&&c<=this.r2&&
gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}};p.prototype={push:function(b){this.vboxes.push({vbox:b,color:b.avg()})},palette:function(){return this.vboxes.map(function(b){return b.color})},size:function(){return this.vboxes.size()},map:function(b){for(var c=this.vboxes,a=0;a<c.size();a++)if(c.peek(a).vbox.contains(b))return c.peek(a).color;return this.nearest(b)},nearest:function(b){for(var c=this.vboxes,a,d,k,n=0;n<c.size();n++)if(d=Math.sqrt(Math.pow(b[0]-c.peek(n).color[0],2)+Math.pow(b[1]-
c.peek(n).color[1],2)+Math.pow(b[2]-c.peek(n).color[2],2)),d<a||void 0===a)a=d,k=c.peek(n).color;return k},forcebw:function(){var b=this.vboxes;b.sort(function(b,a){return t.naturalOrder(t.sum(b.color),t.sum(a.color))});var c=b[0].color;5>c[0]&&5>c[1]&&5>c[2]&&(b[0].color=[0,0,0]);c=b.length-1;var a=b[c].color;251<a[0]&&251<a[1]&&251<a[2]&&(b[c].color=[255,255,255])}};return{quantize:function(d,c){function e(b,a){for(var c=1,d=0,e;1E3>d;)if(e=b.pop(),e.count()){var k=n(h,e);e=k[0];k=k[1];if(!e)break;
b.push(e);k&&(b.push(k),c++);if(c>=a)break;if(1E3<d++)break}else b.push(e),d++}if(!d.length||2>c||256<c)return!1;var h=a(d),k=0;h.forEach(function(){k++});d=b(d,h);var f=new g(function(b,a){return t.naturalOrder(b.count(),a.count())});f.push(d);e(f,.75*c);for(d=new g(function(b,a){return t.naturalOrder(b.count()*b.volume(),a.count()*a.volume())});f.size();)d.push(f.pop());e(d,c-d.size());for(f=new p;d.size();)f.push(d.pop());return f}}}();w.exports=r.quantize},{}],2:[function(r,w,x){(function(){var t,
f,g,m=function(a,b){return function(){return a.apply(b,arguments)}},p=[].slice;window.Swatch=f=function(){function a(b,a){this.rgb=b;this.population=a}a.prototype.hsl=void 0;a.prototype.rgb=void 0;a.prototype.population=1;a.yiq=0;a.prototype.getHsl=function(){return this.hsl?this.hsl:this.hsl=g.rgbToHsl(this.rgb[0],this.rgb[1],this.rgb[2])};a.prototype.getPopulation=function(){return this.population};a.prototype.getRgb=function(){return this.rgb};a.prototype.getHex=function(){return"#"+(16777216+
(this.rgb[0]<<16)+(this.rgb[1]<<8)+this.rgb[2]).toString(16).slice(1,7)};a.prototype.getTitleTextColor=function(){this._ensureTextColors();return 200>this.yiq?"#fff":"#000"};a.prototype.getBodyTextColor=function(){this._ensureTextColors();return 150>this.yiq?"#fff":"#000"};a.prototype._ensureTextColors=function(){if(!this.yiq)return this.yiq=(299*this.rgb[0]+587*this.rgb[1]+114*this.rgb[2])/1E3};return a}();window.Vibrant=g=function(){function a(b,a,e){this.swatches=m(this.swatches,this);var h;"undefined"===
typeof a&&(a=64);"undefined"===typeof e&&(e=5);var d=new t(b);var c=d.getImageData().data;var n=d.getPixelCount();b=[];for(h=0;h<n;){var g=4*h;var k=c[g+0];var p=c[g+1];var r=c[g+2];g=c[g+3];125<=g&&(250<k&&250<p&&250<r||b.push([k,p,r]));h+=e}this._swatches=this.quantize(b,a).vboxes.map(function(b){return function(b){return new f(b.color,b.vbox.count())}}(this));this.maxPopulation=this.findMaxPopulation;this.generateVarationColors();this.generateEmptySwatches();d.removeCanvas()}a.prototype.quantize=
r("quantize");a.prototype._swatches=[];a.prototype.TARGET_DARK_LUMA=.26;a.prototype.MAX_DARK_LUMA=.45;a.prototype.MIN_LIGHT_LUMA=.55;a.prototype.TARGET_LIGHT_LUMA=.74;a.prototype.MIN_NORMAL_LUMA=.3;a.prototype.TARGET_NORMAL_LUMA=.5;a.prototype.MAX_NORMAL_LUMA=.7;a.prototype.TARGET_MUTED_SATURATION=.3;a.prototype.MAX_MUTED_SATURATION=.4;a.prototype.TARGET_VIBRANT_SATURATION=1;a.prototype.MIN_VIBRANT_SATURATION=.35;a.prototype.WEIGHT_SATURATION=3;a.prototype.WEIGHT_LUMA=6;a.prototype.WEIGHT_POPULATION=
1;a.prototype.VibrantSwatch=void 0;a.prototype.MutedSwatch=void 0;a.prototype.DarkVibrantSwatch=void 0;a.prototype.DarkMutedSwatch=void 0;a.prototype.LightVibrantSwatch=void 0;a.prototype.LightMutedSwatch=void 0;a.prototype.HighestPopulation=0;a.prototype.generateVarationColors=function(){this.VibrantSwatch=this.findColorVariation(this.TARGET_NORMAL_LUMA,this.MIN_NORMAL_LUMA,this.MAX_NORMAL_LUMA,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1);this.LightVibrantSwatch=this.findColorVariation(this.TARGET_LIGHT_LUMA,
this.MIN_LIGHT_LUMA,1,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1);this.DarkVibrantSwatch=this.findColorVariation(this.TARGET_DARK_LUMA,0,this.MAX_DARK_LUMA,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1);this.MutedSwatch=this.findColorVariation(this.TARGET_NORMAL_LUMA,this.MIN_NORMAL_LUMA,this.MAX_NORMAL_LUMA,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION);this.LightMutedSwatch=this.findColorVariation(this.TARGET_LIGHT_LUMA,this.MIN_LIGHT_LUMA,1,this.TARGET_MUTED_SATURATION,
0,this.MAX_MUTED_SATURATION);return this.DarkMutedSwatch=this.findColorVariation(this.TARGET_DARK_LUMA,0,this.MAX_DARK_LUMA,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION)};a.prototype.generateEmptySwatches=function(){var b;void 0===this.VibrantSwatch&&void 0!==this.DarkVibrantSwatch&&(b=this.DarkVibrantSwatch.getHsl(),b[2]=this.TARGET_NORMAL_LUMA,this.VibrantSwatch=new f(a.hslToRgb(b[0],b[1],b[2]),0));if(void 0===this.DarkVibrantSwatch&&void 0!==this.VibrantSwatch)return b=this.VibrantSwatch.getHsl(),
b[2]=this.TARGET_DARK_LUMA,this.DarkVibrantSwatch=new f(a.hslToRgb(b[0],b[1],b[2]),0)};a.prototype.findMaxPopulation=function(){var b;var a=0;var e=this._swatches;var h=0;for(b=e.length;h<b;h++){var d=e[h];a=Math.max(a,d.getPopulation())}return a};a.prototype.findColorVariation=function(b,a,e,h,d,c){var n,f,k,g;var m=void 0;var p=0;var r=this._swatches;var l=0;for(n=r.length;l<n;l++)if(g=r[l],k=g.getHsl()[1],f=g.getHsl()[2],k>=d&&k<=c&&f>=a&&f<=e&&!this.isAlreadySelected(g)&&(f=this.createComparisonValue(k,
h,f,b,g.getPopulation(),this.HighestPopulation),void 0===m||f>p))m=g,p=f;return m};a.prototype.createComparisonValue=function(b,a,e,h,d,c){return this.weightedMean(this.invertDiff(b,a),this.WEIGHT_SATURATION,this.invertDiff(e,h),this.WEIGHT_LUMA,d/c,this.WEIGHT_POPULATION)};a.prototype.invertDiff=function(b,a){return 1-Math.abs(b-a)};a.prototype.weightedMean=function(){var b,a,e;var h=1<=arguments.length?p.call(arguments,0):[];for(b=e=a=0;b<h.length;){var d=h[b];var c=h[b+1];a+=d*c;e+=c;b+=2}return a/
e};a.prototype.swatches=function(){return{Vibrant:this.VibrantSwatch,Muted:this.MutedSwatch,DarkVibrant:this.DarkVibrantSwatch,DarkMuted:this.DarkMutedSwatch,LightVibrant:this.LightVibrantSwatch,LightMuted:this.LightMuted}};a.prototype.isAlreadySelected=function(b){return this.VibrantSwatch===b||this.DarkVibrantSwatch===b||this.LightVibrantSwatch===b||this.MutedSwatch===b||this.DarkMutedSwatch===b||this.LightMutedSwatch===b};a.rgbToHsl=function(b,a,e){b/=255;a/=255;e/=255;var h=Math.max(b,a,e);var d=
Math.min(b,a,e);var c=void 0;var f=(h+d)/2;if(h===d)c=d=0;else{var g=h-d;d=.5<f?g/(2-h-d):g/(h+d);switch(h){case b:c=(a-e)/g+(a<e?6:0);break;case a:c=(e-b)/g+2;break;case e:c=(b-a)/g+4}c/=6}return[c,d,f]};a.hslToRgb=function(b,a,e){var f,d;var c=f=d=void 0;c=function(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a};0===a?d=f=c=e:(a=.5>e?e*(1+a):e+a-e*a,e=2*e-a,d=c(e,a,b+1/3),f=c(e,a,b),c=c(e,a,b-1/3));return[255*d,255*f,255*c]};return a}();window.CanvasImage=
t=function(){function a(a){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");document.body.appendChild(this.canvas);this.width=this.canvas.width=a.width;this.height=this.canvas.height=a.height;this.context.drawImage(a,0,0,this.width,this.height)}a.prototype.clear=function(){return this.context.clearRect(0,0,this.width,this.height)};a.prototype.update=function(a){return this.context.putImageData(a,0,0)};a.prototype.getPixelCount=function(){return this.width*this.height};
a.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};a.prototype.removeCanvas=function(){return this.canvas.parentNode.removeChild(this.canvas)};return a}()}).call(this)},{quantize:1}]},{},[2]);
