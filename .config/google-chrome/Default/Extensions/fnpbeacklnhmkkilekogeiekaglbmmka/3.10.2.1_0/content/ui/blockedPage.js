(function(h){(h.NSSS=h.NSSS||{}).blockPage=function(f,e,h){var n=f.utils.isNil,l=f.utils.isntNil,k=e.uiConstants.MESSAGES,g=e.uiConstants.BLOCKPAGE.parameterKeys,m=e.constants,a={parameters:{},strings:{},initializePage:function(){f.localizerProxy.getCurrentLanguageDirection(function(a){"rtl"===a&&$("body").attr("dir","rtl")});a.sliceURI(top.document.location.search);a.getPageObject(a.parameters[g.BLOCK_PAGE_TYPE],function(b){a.isIPS="IPS"===a.parameters[g.BLOCK_PAGE_TYPE]?!0:!1;a.strings=b.string;
a.showSafeWebSearchbox=b.showSafeWebSearchbox;a.showNortonLinks=b.showNortonLinks;a.isFireGlassSupported=b.isFireGlassSupported;a.fullReportURL=a.parameters[g.REPORT_URL]+"&ulang="+a.parameters[g.ULANG];a.pageType=b.pageType;a.getClickPreventionInfo(function(b){a.searched_link_clickPreventionInfo=b;e.blockPage.updateUI()})})},performSearch:function(){var a={searchText:$(".block-page-search-text").val()};f.extensionAdapter.sendMessage({name:k.BLOCKEDPAGE_SEARCH,message:a})},getClickPreventionInfo:function(b){var c=
new URI(a.parameters[g.ORIGINAL_URL]);c=URI.parseQuery(c._parts.query);c={clickPreventionUrlID:n(c.urlIdentifier)?null:c.urlIdentifier};f.extensionAdapter.sendMessage({name:k.RETRIEVE_CLICK_PREVENTION_URL,message:c},b)},getPageObject:function(a,c){f.extensionAdapter.sendMessage({name:k.BLOCKEDPAGE_INIT,message:{pageType:a}},c)},sliceURI:function(b){b=b.slice(1).split("&");for(var c,d=0;d<b.length;d++)c=b[d].slice(0,b[d].indexOf("=")),a.parameters[c]=b[d].slice(b[d].indexOf("=")+1)},updateUI:function(){a.searched_link_clickPreventionInfo.bHasInfo?
$(".block-page-sitename").html(a.searched_link_clickPreventionInfo.blockedURL_sans_urlIdentifier):$(".block-page-sitename").html(a.parameters[g.ORIGINAL_URL]);$(".block-page-text1").html(a.strings.blockedBy);$(".block-page-heading").html(a.strings.title);$(".block-page-text2").html(a.strings.line2);$(".description").html(a.strings.description1+" "+a.strings.description2);$(".text3_3").html(a.strings.visit_symc1);$(".symantec").html(a.strings.symantec);$(".text3_5").html(a.strings.visit_symc2);$(".continue-to-site").html(a.strings.linkToSite);
$(".continue-to-site").click(e.blockPage.continueToSite);$(".view-report-text").html(a.strings.reportSite);$(".report-link").attr("href",a.fullReportURL);l(a.isIPS)&&!0===a.isIPS&&($(".block-page-view-report").hide(),$(".symantec").click(a.openIPSLearnMoreLink));!1===a.showSafeWebSearchbox&&$(".block-page-search").hide();!1===a.showNortonLinks&&$(".block-page-text3-line2").hide();$(".block-page-search-text").attr("placeholder",a.strings.searchBoxText);$(".block-page-search-icon").click(e.blockPage.performSearch);
$(".block-page-search-text").keypress(function(a){13==a.which&&e.blockPage.performSearch()})},openIPSLearnMoreLink:function(a){a.preventDefault();f.extensionAdapter.sendMessage({name:k.OPEN_IPS_LEARN_MORE_URL})},locationReplace:function(a){document.location.replace(a)},continueToSite:function(){var b=!0===a.isIPS?a.parameters[g.ORIGINAL_URL]:a.parameters[g.CONTINUE_TO_SITE_URL],c=new URI(b),d=URI.parseQuery(c._parts.query);d=n(d[m.URL_IDENTIFIER])?null:d[m.URL_IDENTIFIER];var e={name:k.OPEN_DO_NOT_BLOCK_PAGE,
message:{url:b,blockPageType:a.parameters[g.BLOCK_PAGE_TYPE]?a.parameters[g.BLOCK_PAGE_TYPE]:a.pageType}},p=function(b){var c=b.message.url;l(c)&&""!==c&&"Unavailable"!==c&&(l(h)&&a.isFireGlassSupported?h.helpers.nss_safe_mode_prompt(c,function(a){f.extensionAdapter.sendMessage(b)}):f.extensionAdapter.sendMessage(b))};l(d)?(e.message.url=!0===a.searched_link_clickPreventionInfo.bHasInfo?a.searched_link_clickPreventionInfo.url:c.removeSearch(m.URL_IDENTIFIER).toString(),f.extensionAdapter.sendMessage({name:k.ADD_TO_CLICK_PREVENTION_SAFELIST,
message:{clickPreventionUrlID:d}},function(){p(e)})):p(e)}};return a}(h.SymBfw,h.NSSS,h.FG)})(executionContext);$(document).ready(NSSS.blockPage.initializePage);
